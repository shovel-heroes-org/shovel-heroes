# éŸå­è‹±é›„ - æ¬Šé™è¨­è¨ˆæ–‡ä»¶

## è§’è‰²å®šç¾©

### 1. è¨ªå®¢ (guest)
- æœªç™»å…¥ç‹€æ…‹æ¨¡æ“¬
- åªèƒ½ç€è¦½å…¬é–‹è³‡è¨Š

### 2. ä¸€èˆ¬ç”¨æˆ¶ (user)
- å·²ç™»å…¥çš„ä¸€èˆ¬å¿—å·¥

### 3. ç¶²æ ¼ç®¡ç†å“¡ (grid_manager)
- è² è²¬ç®¡ç†ç‰¹å®šå€åŸŸçš„ç¶²æ ¼

### 4. ç®¡ç†å“¡ (admin)
- ç³»çµ±ç®¡ç†å“¡

### 5. è¶…ç´šç®¡ç†å“¡ (super_admin)
- æœ€é«˜æ¬Šé™ç®¡ç†å“¡

---

## æ–°çš„æ¬Šé™è¨­è¨ˆè¦åŠƒ

### ğŸ“ **å°èˆªé é¢æ¬Šé™**

| é é¢ | è¨ªå®¢ | ä¸€èˆ¬ç”¨æˆ¶ | ç¶²æ ¼ç®¡ç†å“¡ | ç®¡ç†å“¡ | è¶…ç´šç®¡ç†å“¡ |
|------|------|----------|------------|--------|------------|
| æ•‘æ´åœ°åœ– | âœ… | âœ… | âœ… | âœ… | âœ… |
| ç‰©è³‡ç®¡ç† | âœ… | âœ… | âœ… | âœ… | âœ… |
| å¿—å·¥ä¸­å¿ƒ | âŒ | âœ… | âœ… | âœ… | âœ… |
| ç®¡ç†å¾Œå° | âŒ | âœ… (å—é™) | âœ… (å—é™) | âœ… | âœ… |
| é—œæ–¼æˆ‘å€‘ | âœ… | âœ… | âœ… | âœ… | âœ… |

---

## ğŸ“Š **ç®¡ç†å¾Œå°åŠŸèƒ½æ¬Šé™è©³ç´°è¦åŠƒ**

### 1ï¸âƒ£ **ç¶²æ ¼ç®¡ç†**

#### **ä¸€èˆ¬ç”¨æˆ¶ (user)**
- âœ… **åªèƒ½æŸ¥çœ‹è‡ªå·±å»ºç«‹çš„ç¶²æ ¼**ï¼ˆä¸æœƒçœ‹åˆ°ä»–äººå»ºç«‹çš„ç¶²æ ¼ï¼‰
- âœ… å¯ä»¥å»ºç«‹æ–°ç¶²æ ¼
- âœ… å¯ä»¥ç·¨è¼¯**è‡ªå·±å»ºç«‹**çš„ç¶²æ ¼
- âœ… å¯ä»¥åˆªé™¤**è‡ªå·±å»ºç«‹**çš„ç¶²æ ¼ï¼ˆè»Ÿåˆªé™¤åˆ°åƒåœ¾æ¡¶ï¼‰
- âœ… å¯ä»¥æŸ¥çœ‹åƒåœ¾æ¡¶ï¼ˆåªé¡¯ç¤ºè‡ªå·±åˆªé™¤çš„ç¶²æ ¼ï¼‰
- âœ… å¯ä»¥é‚„åŸè‡ªå·±çš„ç¶²æ ¼
- âœ… å¯ä»¥æ‰¹é‡é¸æ“‡**è‡ªå·±å»ºç«‹**çš„ç¶²æ ¼
- âŒ ä¸å¯æ°¸ä¹…åˆªé™¤

#### **ç¶²æ ¼ç®¡ç†å“¡ (grid_manager)**
- âœ… å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç¶²æ ¼
- âœ… å¯ä»¥å»ºç«‹æ–°ç¶²æ ¼
- âœ… å¯ä»¥ç·¨è¼¯**æ‰€æœ‰ç¶²æ ¼**
- âœ… å¯ä»¥å°‡**æ‰€æœ‰ç¶²æ ¼**ä¸Ÿå…¥åƒåœ¾æ¡¶
- âœ… å¯ä»¥é‚„åŸåƒåœ¾æ¡¶ä¸­çš„æ‰€æœ‰ç¶²æ ¼
- âœ… å¯ä»¥æŸ¥çœ‹åƒåœ¾æ¡¶
- âœ… å¯ä»¥æ‰¹é‡é¸æ“‡å’Œæ“ä½œæ‰€æœ‰ç¶²æ ¼
- âŒ ä¸å¯æ°¸ä¹…åˆªé™¤

#### **ç®¡ç†å“¡ (admin)**
- âœ… å®Œæ•´çš„ç¶²æ ¼ç®¡ç†æ¬Šé™
- âœ… å¯ä»¥ç·¨è¼¯æ‰€æœ‰ç¶²æ ¼
- âœ… å¯ä»¥åˆªé™¤æ‰€æœ‰ç¶²æ ¼ï¼ˆè»Ÿåˆªé™¤ï¼‰
- âœ… å¯ä»¥é‚„åŸæ‰€æœ‰ç¶²æ ¼
- âœ… å¯ä»¥æ°¸ä¹…åˆªé™¤
- âœ… å¯ä»¥æŸ¥çœ‹åƒåœ¾æ¡¶

#### **è¶…ç´šç®¡ç†å“¡ (super_admin)**
- âœ… æ‰€æœ‰æ¬Šé™

---

### 2ï¸âƒ£ **ç½å€ç®¡ç†**

#### **ä¸€èˆ¬ç”¨æˆ¶ (user)**
- âœ… å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç½å€ï¼ˆå”¯è®€ï¼‰
- âŒ **ä¸å¯å»ºç«‹ç½å€**
- âŒ **ä¸å¯ç·¨è¼¯ç½å€**
- âŒ **ä¸å¯åˆªé™¤ç½å€**
- âŒ **ä¸å¯çœ‹åˆ°åƒåœ¾æ¡¶**

#### **ç¶²æ ¼ç®¡ç†å“¡ (grid_manager)**
- âœ… å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç½å€
- âœ… å¯ä»¥å»ºç«‹æ–°ç½å€
- âœ… å¯ä»¥ç·¨è¼¯ç½å€
- âœ… å¯ä»¥å°‡ç½å€ä¸Ÿå…¥åƒåœ¾æ¡¶
- âœ… å¯ä»¥é‚„åŸç½å€
- âœ… å¯ä»¥æŸ¥çœ‹åƒåœ¾æ¡¶
- âŒ ä¸å¯æ°¸ä¹…åˆªé™¤

#### **ç®¡ç†å“¡ (admin)**
- âœ… å®Œæ•´çš„ç½å€ç®¡ç†æ¬Šé™
- âœ… å¯ä»¥å»ºç«‹/ç·¨è¼¯/åˆªé™¤ç½å€
- âœ… å¯ä»¥æ°¸ä¹…åˆªé™¤

#### **è¶…ç´šç®¡ç†å“¡ (super_admin)**
- âœ… æ‰€æœ‰æ¬Šé™

---

### 3ï¸âƒ£ **å¿—å·¥ç®¡ç†**

#### **ä¸€èˆ¬ç”¨æˆ¶ (user)**
- âœ… å¯ä»¥æŸ¥çœ‹å¿—å·¥åˆ—è¡¨ï¼ˆå”¯è®€ï¼‰
- âŒ ä¸å¯ç·¨è¼¯å¿—å·¥è³‡è¨Š
- âŒ ä¸å¯åŒ¯å‡º

#### **ç¶²æ ¼ç®¡ç†å“¡ (grid_manager)**
- âœ… å¯ä»¥æŸ¥çœ‹å¿—å·¥åˆ—è¡¨ï¼ˆå”¯è®€ï¼‰
- âŒ ä¸å¯ç·¨è¼¯å¿—å·¥è³‡è¨Š
- âŒ ä¸å¯åŒ¯å‡º

#### **ç®¡ç†å“¡ (admin)**
- âœ… å¯ä»¥æŸ¥çœ‹å¿—å·¥åˆ—è¡¨
- âœ… å¯ä»¥ç·¨è¼¯å¿—å·¥è³‡è¨Š
- âœ… å¯ä»¥åŒ¯å‡ºå¿—å·¥è³‡æ–™

#### **è¶…ç´šç®¡ç†å“¡ (super_admin)**
- âœ… æ‰€æœ‰æ¬Šé™

---

### 4ï¸âƒ£ **ç‰©è³‡ç®¡ç†**

#### **ä¸€èˆ¬ç”¨æˆ¶ (user)**
- âœ… å¯ä»¥æŸ¥çœ‹ç‰©è³‡åˆ—è¡¨ï¼ˆå”¯è®€ï¼‰
- âŒ ä¸å¯ç·¨è¼¯ç‰©è³‡
- âŒ ä¸å¯åŒ¯å‡º

#### **ç¶²æ ¼ç®¡ç†å“¡ (grid_manager)**
- âœ… å¯ä»¥æŸ¥çœ‹ç‰©è³‡åˆ—è¡¨ï¼ˆå”¯è®€ï¼‰
- âŒ ä¸å¯ç·¨è¼¯ç‰©è³‡
- âŒ ä¸å¯åŒ¯å‡º

#### **ç®¡ç†å“¡ (admin)**
- âœ… å¯ä»¥æŸ¥çœ‹ç‰©è³‡åˆ—è¡¨
- âœ… å¯ä»¥ç·¨è¼¯ç‰©è³‡
- âœ… å¯ä»¥åŒ¯å‡ºç‰©è³‡è³‡æ–™
- âœ… å¯ä»¥åŒ¯å…¥ç‰©è³‡è³‡æ–™

#### **è¶…ç´šç®¡ç†å“¡ (super_admin)**
- âœ… æ‰€æœ‰æ¬Šé™

---

### 5ï¸âƒ£ **ç”¨æˆ¶ç®¡ç†**

#### **ä¸€èˆ¬ç”¨æˆ¶ (user)**
- âŒ ä¸å¯è¨ªå•

#### **ç¶²æ ¼ç®¡ç†å“¡ (grid_manager)**
- âŒ ä¸å¯è¨ªå•

#### **ç®¡ç†å“¡ (admin)**
- âœ… å¯ä»¥æŸ¥çœ‹ç”¨æˆ¶åˆ—è¡¨
- âœ… å¯ä»¥ç·¨è¼¯ç”¨æˆ¶è§’è‰²

#### **è¶…ç´šç®¡ç†å“¡ (super_admin)**
- âœ… æ‰€æœ‰æ¬Šé™

---

### 6ï¸âƒ£ **ç³»çµ±å…¬å‘Šç®¡ç†**

#### **ä¸€èˆ¬ç”¨æˆ¶ (user)**
- âœ… å¯ä»¥æŸ¥çœ‹å…¬å‘Šï¼ˆå”¯è®€ï¼‰
- âŒ ä¸å¯æ–°å¢/ç·¨è¼¯/åˆªé™¤

#### **ç¶²æ ¼ç®¡ç†å“¡ (grid_manager)**
- âœ… å¯ä»¥æŸ¥çœ‹å…¬å‘Šï¼ˆå”¯è®€ï¼‰
- âŒ ä¸å¯æ–°å¢/ç·¨è¼¯/åˆªé™¤

#### **ç®¡ç†å“¡ (admin)**
- âœ… å¯ä»¥æ–°å¢/ç·¨è¼¯/åˆªé™¤å…¬å‘Š

#### **è¶…ç´šç®¡ç†å“¡ (super_admin)**
- âœ… æ‰€æœ‰æ¬Šé™

---

### 7ï¸âƒ£ **å¯©è¨ˆæ—¥èªŒ**

#### **ä¸€èˆ¬ç”¨æˆ¶ (user)**
- âŒ ä¸å¯è¨ªå•

#### **ç¶²æ ¼ç®¡ç†å“¡ (grid_manager)**
- âŒ ä¸å¯è¨ªå•

#### **ç®¡ç†å“¡ (admin)**
- âœ… å¯ä»¥æŸ¥çœ‹å¯©è¨ˆæ—¥èªŒ
- âŒ ä¸å¯æ¸…é™¤æ—¥èªŒ

#### **è¶…ç´šç®¡ç†å“¡ (super_admin)**
- âœ… å¯ä»¥æŸ¥çœ‹å¯©è¨ˆæ—¥èªŒ
- âœ… å¯ä»¥æ¸…é™¤æ—¥èªŒ

---

## ğŸ”„ **åŒ¯å‡º/åŒ¯å…¥æ¬Šé™ç¸½çµ**

| åŠŸèƒ½ | ä¸€èˆ¬ç”¨æˆ¶ | ç¶²æ ¼ç®¡ç†å“¡ | ç®¡ç†å“¡ | è¶…ç´šç®¡ç†å“¡ |
|------|----------|------------|--------|------------|
| åŒ¯å‡ºç¶²æ ¼ | âŒ | âœ… | âœ… | âœ… |
| åŒ¯å…¥ç¶²æ ¼ | âŒ | âœ… | âœ… | âœ… |
| åŒ¯å‡ºç½å€ | âŒ | âœ… | âœ… | âœ… |
| åŒ¯å…¥ç½å€ | âŒ | âœ… | âœ… | âœ… |
| åŒ¯å‡ºå¿—å·¥ | âŒ | âŒ | âœ… | âœ… |
| åŒ¯å…¥å¿—å·¥ | âŒ | âŒ | âœ… | âœ… |
| åŒ¯å‡ºç‰©è³‡ | âŒ | âŒ | âœ… | âœ… |
| åŒ¯å…¥ç‰©è³‡ | âŒ | âŒ | âœ… | âœ… |

---

## ğŸ—‘ï¸ **åƒåœ¾æ¡¶é¡¯ç¤ºæ¬Šé™**

| è§’è‰² | ç¶²æ ¼åƒåœ¾æ¡¶ | ç½å€åƒåœ¾æ¡¶ | é‚„åŸåŠŸèƒ½ | æ°¸ä¹…åˆªé™¤ |
|------|-----------|-----------|---------|---------|
| ä¸€èˆ¬ç”¨æˆ¶ | âœ… | âœ… | âœ… | âŒ |
| ç¶²æ ¼ç®¡ç†å“¡ | âœ… | âœ… | âœ… | âŒ |
| ç®¡ç†å“¡ | âœ… | âœ… | âœ… | âœ… |
| è¶…ç´šç®¡ç†å“¡ | âœ… | âœ… | âœ… | âœ… |

---

## ğŸ“ **å»ºç«‹è€…æ¬Šé™è¦å‰‡**

### ç¶²æ ¼ç·¨è¼¯æ¬Šé™çŸ©é™£

| å»ºç«‹è€…è§’è‰² \ ç·¨è¼¯è€…è§’è‰² | ä¸€èˆ¬ç”¨æˆ¶ | ç¶²æ ¼ç®¡ç†å“¡ | ç®¡ç†å“¡ | è¶…ç´šç®¡ç†å“¡ |
|----------------------|----------|------------|--------|------------|
| ä¸€èˆ¬ç”¨æˆ¶å»ºç«‹çš„ç¶²æ ¼ | âœ… (è‡ªå·±çš„) | âœ… | âœ… | âœ… |
| ç¶²æ ¼ç®¡ç†å“¡å»ºç«‹çš„ç¶²æ ¼ | âŒ | âœ… (è‡ªå·±çš„) | âœ… | âœ… |
| ç®¡ç†å“¡å»ºç«‹çš„ç¶²æ ¼ | âŒ | âŒ | âœ… | âœ… |
| è¶…ç´šç®¡ç†å“¡å»ºç«‹çš„ç¶²æ ¼ | âŒ | âŒ | âŒ | âœ… |

---

## å¯¦ä½œå»ºè­°

### å‰ç«¯æª¢æŸ¥
åœ¨ `Admin.jsx` ä¸­æ–°å¢æ¬Šé™æª¢æŸ¥å‡½æ•¸ï¼š
```javascript
// æª¢æŸ¥æ˜¯å¦å¯ä»¥ç·¨è¼¯ç‰¹å®šç¶²æ ¼
const canEditGrid = (grid) => {
  if (isSuperAdmin || isAdmin) return true;
  if (isGridManager) {
    // å¯ç·¨è¼¯è‡ªå·±çš„ + ä¸€èˆ¬ç”¨æˆ¶çš„
    return grid.created_by === user.id || grid.creator_role === 'user';
  }
  if (actingRole === 'user') {
    // åªèƒ½ç·¨è¼¯è‡ªå·±å»ºç«‹çš„
    return grid.created_by === user.id;
  }
  return false;
};

// æª¢æŸ¥æ˜¯å¦å¯ä»¥åˆªé™¤ç‰¹å®šç¶²æ ¼
const canDeleteGrid = (grid) => {
  if (isSuperAdmin || isAdmin) return true;
  if (isGridManager) {
    return grid.created_by === user.id || grid.creator_role === 'user';
  }
  if (actingRole === 'user') {
    return grid.created_by === user.id;
  }
  return false;
};

// æª¢æŸ¥æ˜¯å¦å¯ä»¥æ°¸ä¹…åˆªé™¤
const canPermanentlyDelete = () => {
  return isSuperAdmin || isAdmin;
};
```

### å¾Œç«¯ API æ¬Šé™æª¢æŸ¥
éœ€è¦åœ¨å¾Œç«¯è·¯ç”±å¢åŠ å°æ‡‰çš„æ¬Šé™é©—è­‰ä¸­é–“ä»¶ã€‚
