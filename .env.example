DATABASE_URL=postgres://postgres:postgres@localhost:5432/shovelheroes
PORT=8787

# === Public App / API Base ===
# Frontend (deployed) base URL used for redirects after auth
PUBLIC_APP_URL=http://localhost:5173
# Base URL where backend is reachable (used to form default LINE redirect if LINE_REDIRECT_URI not set)
PUBLIC_BASE_URL=http://localhost:8787

# === LINE Login (OAuth 2.1 / OpenID Connect) ===
# Obtain from LINE Developers Console
LINE_CHANNEL_ID=
LINE_CHANNEL_SECRET=
# Explicit redirect URI registered in LINE console, e.g. http://localhost:8787/auth/line/callback
LINE_REDIRECT_URI=

# === Auth (JWT) ===
# Secret key for signing issued JWT tokens (HS256). CHANGE in production.
AUTH_JWT_SECRET=dev-jwt-secret-change-me

# === Cookies / Sessions ===
# Secret for signing cookies (Fastify @fastify/cookie plugin)
COOKIE_SECRET=dev-cookie-secret-change-me
# Set to 1 in production over HTTPS to mark cookies as Secure
COOKIE_SECURE=0

# === Frontend Build (Vite) ===
# Provided to frontend to call backend API
VITE_API_BASE=http://localhost:8787
VITE_TURNSTILE_SITE_KEY=

# === Bot / Abuse Prevention ===
# Cloudflare Turnstile secret key (server-side verification). Only set on backend / server environment.
TURNSTILE_SECRET_KEY=

# === Feature Flags ===
# Future: ENABLE_ANALYTICS=1

# === Notes ===
# 1. If LINE_REDIRECT_URI is blank, backend will attempt to derive using PUBLIC_BASE_URL + /auth/line/callback
# 2. After setting LINE variables, restart backend.
# 3. Set COOKIE_SECURE=1 only when serving over HTTPS.
# 4. AUTH_JWT_SECRET and COOKIE_SECRET must be rotated if leaked.
# 5. Turnstile: provide both VITE_TURNSTILE_SITE_KEY (public) and TURNSTILE_SECRET_KEY (private) to enable grid creation challenge.